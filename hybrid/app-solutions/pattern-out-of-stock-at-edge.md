---
title: Rilevamento scorte esaurite con Azure e Azure Stack Edge
description: Informazioni su come usare Azure e i servizi di Azure Stack Edge per implementare il rilevamento delle scorte.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 865f63bc4234e50ed169aa29cefdb1886750594c
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/17/2020
ms.locfileid: "84911188"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="8e079-103">Rilevamento scorte esaurito al modello perimetrale</span><span class="sxs-lookup"><span data-stu-id="8e079-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="8e079-104">Questo modello illustra come determinare se gli scaffali hanno esaurito le scorte usando un Azure Stack Edge o un dispositivo Azure IoT Edge e telecamere di rete.</span><span class="sxs-lookup"><span data-stu-id="8e079-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="8e079-105">Contesto e problema</span><span class="sxs-lookup"><span data-stu-id="8e079-105">Context and problem</span></span>

<span data-ttu-id="8e079-106">Le vendite al dettaglio fisico vengono perse perché quando i clienti cercano un elemento, non è presente sullo scaffale.</span><span class="sxs-lookup"><span data-stu-id="8e079-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="8e079-107">Tuttavia, l'elemento potrebbe essere stato riportato nella parte posteriore dell'archivio e non è stato rifornito.</span><span class="sxs-lookup"><span data-stu-id="8e079-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="8e079-108">Gli archivi desiderano utilizzare il personale in modo più efficiente e ricevere notifiche automatiche quando gli elementi devono essere riforniti.</span><span class="sxs-lookup"><span data-stu-id="8e079-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="8e079-109">Soluzione</span><span class="sxs-lookup"><span data-stu-id="8e079-109">Solution</span></span>

<span data-ttu-id="8e079-110">L'esempio di soluzione USA un dispositivo perimetrale, come un Azure Stack Edge in ogni negozio, che elabora in modo efficiente i dati dalle fotocamere nello Store.</span><span class="sxs-lookup"><span data-stu-id="8e079-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="8e079-111">Questa progettazione ottimizzata consente agli archivi di inviare solo gli eventi e le immagini rilevanti al cloud.</span><span class="sxs-lookup"><span data-stu-id="8e079-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="8e079-112">La progettazione consente di risparmiare larghezza di banda, spazio di archiviazione e garantire la privacy dei clienti.</span><span class="sxs-lookup"><span data-stu-id="8e079-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="8e079-113">Poiché i frame vengono letti da ogni fotocamera, un modello ML elabora l'immagine e restituisce tutte le aree di inventario.</span><span class="sxs-lookup"><span data-stu-id="8e079-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="8e079-114">L'immagine e le aree esaurite vengono visualizzate in un'app Web locale.</span><span class="sxs-lookup"><span data-stu-id="8e079-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="8e079-115">Questi dati possono essere inviati a un ambiente Time Series Insight per visualizzare informazioni dettagliate in Power BI.</span><span class="sxs-lookup"><span data-stu-id="8e079-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Inventario esaurito all'architettura della soluzione perimetrale](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="8e079-117">Ecco come funziona la soluzione:</span><span class="sxs-lookup"><span data-stu-id="8e079-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="8e079-118">Le immagini vengono acquisite da una videocamera di rete tramite HTTP o RTSP.</span><span class="sxs-lookup"><span data-stu-id="8e079-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="8e079-119">L'immagine viene ridimensionata e inviata al driver di inferenza, che comunica con il modello ML per determinare se sono presenti immagini predefinite.</span><span class="sxs-lookup"><span data-stu-id="8e079-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="8e079-120">Il modello ML restituisce tutte le aree riservate.</span><span class="sxs-lookup"><span data-stu-id="8e079-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="8e079-121">Il driver di inferenza carica l'immagine non elaborata in un BLOB (se specificato) e invia i risultati del modello all'hub di Azure e a un processore del rettangolo di delimitazione nel dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8e079-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="8e079-122">Il processore del rettangolo di delimitazione aggiunge i riquadri all'immagine e memorizza nella cache il percorso dell'immagine in un database in memoria.</span><span class="sxs-lookup"><span data-stu-id="8e079-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="8e079-123">L'app Web esegue una query per le immagini e le Mostra nell'ordine in cui sono state ricevute.</span><span class="sxs-lookup"><span data-stu-id="8e079-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="8e079-124">I messaggi dall'hub Internet vengono aggregati in Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="8e079-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="8e079-125">Power BI Visualizza un report interattivo degli elementi esauriti nel tempo con i dati provenienti da Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="8e079-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="8e079-126">Componenti</span><span class="sxs-lookup"><span data-stu-id="8e079-126">Components</span></span>

<span data-ttu-id="8e079-127">Questa soluzione USA i componenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="8e079-127">This solution uses the following components:</span></span>

| <span data-ttu-id="8e079-128">Livello</span><span class="sxs-lookup"><span data-stu-id="8e079-128">Layer</span></span> | <span data-ttu-id="8e079-129">Componente</span><span class="sxs-lookup"><span data-stu-id="8e079-129">Component</span></span> | <span data-ttu-id="8e079-130">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8e079-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="8e079-131">Hardware locale</span><span class="sxs-lookup"><span data-stu-id="8e079-131">On-premises hardware</span></span> | <span data-ttu-id="8e079-132">Videocamera di rete</span><span class="sxs-lookup"><span data-stu-id="8e079-132">Network camera</span></span> | <span data-ttu-id="8e079-133">È necessaria una videocamera di rete, con un feed HTTP o RTSP per fornire le immagini per l'inferenza.</span><span class="sxs-lookup"><span data-stu-id="8e079-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="8e079-134">Azure</span><span class="sxs-lookup"><span data-stu-id="8e079-134">Azure</span></span> | <span data-ttu-id="8e079-135">Hub IoT Azure</span><span class="sxs-lookup"><span data-stu-id="8e079-135">Azure IoT Hub</span></span> | <span data-ttu-id="8e079-136">L' [Hub Azure](/azure/iot-hub/) Internet gestisce il provisioning dei dispositivi e la messaggistica per i dispositivi perimetrali.</span><span class="sxs-lookup"><span data-stu-id="8e079-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="8e079-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="8e079-137">Azure Time Series Insights</span></span> | <span data-ttu-id="8e079-138">[Azure Time Series Insights](/azure/time-series-insights/) archivia i messaggi dall'hub Internet per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="8e079-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="8e079-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="8e079-139">Power BI</span></span> | <span data-ttu-id="8e079-140">[Microsoft Power bi](https://powerbi.microsoft.com/) fornisce report specifici dell'azienda per gli eventi di esaurimento delle scorte.</span><span class="sxs-lookup"><span data-stu-id="8e079-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="8e079-141">Power BI offre un'interfaccia Dashboard di facile utilizzo per la visualizzazione dell'output di analisi di flusso di Azure.</span><span class="sxs-lookup"><span data-stu-id="8e079-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="8e079-142">Azure Stack Edge o</span><span class="sxs-lookup"><span data-stu-id="8e079-142">Azure Stack Edge or</span></span><br><span data-ttu-id="8e079-143">Dispositivo Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="8e079-143">Azure IoT Edge device</span></span> | <span data-ttu-id="8e079-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="8e079-144">Azure IoT Edge</span></span> | <span data-ttu-id="8e079-145">[Azure IOT Edge](/azure/iot-edge/) orchestra il runtime per i contenitori locali e gestisce gli aggiornamenti e la gestione dei dispositivi.</span><span class="sxs-lookup"><span data-stu-id="8e079-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="8e079-146">Progetto di Azure cerebrale</span><span class="sxs-lookup"><span data-stu-id="8e079-146">Azure project brainwave</span></span> | <span data-ttu-id="8e079-147">In un dispositivo Azure Stack Edge, il [progetto](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) incrociato di controllo Usa matrici di controllo (FPGA) programmabili per accelerare l'inferenza di ml.</span><span class="sxs-lookup"><span data-stu-id="8e079-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="8e079-148">Considerazioni e problemi</span><span class="sxs-lookup"><span data-stu-id="8e079-148">Issues and considerations</span></span>

<span data-ttu-id="8e079-149">Quando si decide come implementare questa soluzione, tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="8e079-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="8e079-150">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="8e079-150">Scalability</span></span>

<span data-ttu-id="8e079-151">La maggior parte dei modelli di apprendimento automatico può essere eseguita solo a un certo numero di frame al secondo, a seconda dell'hardware fornito.</span><span class="sxs-lookup"><span data-stu-id="8e079-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="8e079-152">Determinare la frequenza di campionamento ottimale dalle fotocamere per assicurarsi che la pipeline ML non venga sottoposta a backup.</span><span class="sxs-lookup"><span data-stu-id="8e079-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="8e079-153">Tipi diversi di hardware gestiranno diversi numeri di fotocamere e frequenze dei fotogrammi.</span><span class="sxs-lookup"><span data-stu-id="8e079-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="8e079-154">Disponibilità</span><span class="sxs-lookup"><span data-stu-id="8e079-154">Availability</span></span>

<span data-ttu-id="8e079-155">È importante considerare cosa può accadere se il dispositivo perimetrale perde la connettività.</span><span class="sxs-lookup"><span data-stu-id="8e079-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="8e079-156">Considerare i dati che potrebbero andare perduti dal dashboard Time Series Insights e Power BI.</span><span class="sxs-lookup"><span data-stu-id="8e079-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="8e079-157">La soluzione di esempio fornita non è progettata per essere a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="8e079-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="8e079-158">Gestione</span><span class="sxs-lookup"><span data-stu-id="8e079-158">Manageability</span></span>

<span data-ttu-id="8e079-159">Questa soluzione può estendersi a molti dispositivi e posizioni, che potrebbero essere difficili da gestire.</span><span class="sxs-lookup"><span data-stu-id="8e079-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="8e079-160">I servizi Internet delle cose di Azure possono portare automaticamente nuovi percorsi e dispositivi e mantenerli aggiornati.</span><span class="sxs-lookup"><span data-stu-id="8e079-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="8e079-161">Devono essere seguite anche le procedure di governance dei dati appropriate.</span><span class="sxs-lookup"><span data-stu-id="8e079-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="8e079-162">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="8e079-162">Security</span></span>

<span data-ttu-id="8e079-163">Questo modello gestisce dati potenzialmente sensibili.</span><span class="sxs-lookup"><span data-stu-id="8e079-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="8e079-164">Verificare che le chiavi vengano ruotate regolarmente e che le autorizzazioni per l'account di archiviazione di Azure e le condivisioni locali siano impostate correttamente.</span><span class="sxs-lookup"><span data-stu-id="8e079-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8e079-165">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8e079-165">Next steps</span></span>

<span data-ttu-id="8e079-166">Per ulteriori informazioni sugli argomenti introdotti in questo articolo:</span><span class="sxs-lookup"><span data-stu-id="8e079-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="8e079-167">In questo modello vengono usati più servizi correlati alle cose, tra cui [Azure IOT Edge](/azure/iot-edge/), l' [Hub Azure](/azure/iot-hub/)e l' [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="8e079-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="8e079-168">Per altre informazioni su Microsoft Project scondel, vedere [l'annuncio del Blog](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) ed estrarre il [video di Azure Accelerated Machine Learning con Project onder](https://www.youtube.com/watch?v=DJfMobMjCX0).</span><span class="sxs-lookup"><span data-stu-id="8e079-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="8e079-169">Per altre informazioni sulle procedure consigliate e per ottenere risposte a eventuali domande aggiuntive, vedere [considerazioni sulla progettazione di app ibride](overview-app-design-considerations.md) .</span><span class="sxs-lookup"><span data-stu-id="8e079-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="8e079-170">Per ulteriori informazioni sull'intero portfolio di prodotti e soluzioni, vedere la [famiglia di prodotti e soluzioni Azure stack](/azure-stack) .</span><span class="sxs-lookup"><span data-stu-id="8e079-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="8e079-171">Quando si è pronti per testare l'esempio di soluzione, continuare con la [Guida alla distribuzione dei dati a più livelli per la soluzione di analisi](https://aka.ms/edgeinferencingdeploy).</span><span class="sxs-lookup"><span data-stu-id="8e079-171">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="8e079-172">Nella Guida alla distribuzione vengono fornite istruzioni dettagliate per la distribuzione e il test dei componenti di.</span><span class="sxs-lookup"><span data-stu-id="8e079-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
